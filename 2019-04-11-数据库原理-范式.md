---
layout: post
title: 数据库原理-范式
subtitle: 1-5NF,BCNF
author: Kingtous
date: 2019-04-11 09:12:34
header-img: img/404-bg.jpg
catalog: True
tags:
- MySQL
- 数据库原理
---

### 1NF(第一范式)

第一范式是指数据库表中的每一列都是不可分割的基本数据项，同一列中不能有多个值，即实体中的某个属性不能有多个值或者不能有重复的属性。



如果出现重复的属性，就可能需要定义一个新的实体，新的实体由重复的属性构成，新实体与原实体之间为一对多关系。第一范式的模式要求属性值不可再分裂成更小部分，即属性项不能是属性组合或是由一组属性构成。



简而言之，第一范式就是无重复的列。例如，由“职工号”“姓名”“电话号码”组成的表(一个人可能有一部办公电话和一部移动电话)，这时将其**规范化为1NF可以将电话号码分为“办公电话”和“移动电话”两个属性**，即职工(职工号，姓名，办公电话，移动电话)。



### 2NF(第二范式)

第二范式(2NF)是在第一范式(1NF)的基础上建立起来的，即满足第二范式(2NF)必须先满足第一范式(1NF)。第二范式(2NF)要求数据库表中的**每个实例或行必须可以被唯一地区分**。为实现区分通常需要为表加上一个列，以存储各个实例的唯一标识。



如果关系模型R为第一范式，并且R中的每一个非主属性完全函数依赖于R的某个候选键，则称R为第二范式模式(如果A是关系模式R的候选键的一个属性，则称A是R的主属性，否则称A是R的非主属性)。



例子：在选课关系表(学号，课程号，成绩，学分)，关键字为组合关键字(学号，课程号)，但由于非主属性**学分**仅依赖于课程号，**对关键字(学号，课程号)只是部分依赖**，而不是完全依赖

问题：此种方式会导致数据冗余以及更新异常等问题

解决办法：将其分为两个关系模式：学生表(学号，课程号，分数)和课程表(课程号，学分)，新关系通过学生表中的外关键字课程号联系，在需要时进行连接。



### 3NF(第三范式)

如果关系模型R是第二范式，且**每个非主属性都不传递依赖于R的候选键**，则称R是第三范式的模式。



以学生表(学号，姓名，课程号，成绩)为例，其中学生姓名无重名，所以该表有两个候选码(学号，课程号)和(姓名，课程号)，故存在函数依赖：学号——>姓名，(学号，课程号)——>成绩，唯一的非主属性**成绩对码不存在部分依赖，也不存在传递依赖**，所以属性属于第三范式。



### BCNF(BC范式)

它构建在第三范式的基础上，如果关系模型R是第一范式，且**每个属性都不传递依赖于R的候选键**，那么称R为BCNF的模式。



假设仓库管理关系表(仓库号，存储物品号，管理员号，数量)，满足一个管理员只在一个仓库工作；一个仓库可以存储多种物品，则存在如下关系：

(仓库号，存储物品号)——>(管理员号，数量)

(管理员号，存储物品号)——>(仓库号，数量)

所以，(仓库号，存储物品号)和(管理员号，存储物品号)都是仓库管理关系表的候选码，表中唯一非关键字段为数量，它是符合第三范式的。但是，由于存在如下决定关系：

(仓库号)——>(管理员号)

(管理员号)——>(仓库号)

即存在关键字段决定关键字段的情况，因此其不符合BCNF。把仓库管理关系表分解为两个关系表仓库管理表(仓库号，管理员号)和仓库表(仓库号，存储物品号，数量)，这样这个数据库表是符合BCNF的，并消除了删除异常、插入异常和更新异常。



### 4NF(第四范式)

设R是一个关系模型，D是R上的多值依赖集合。如果D中存在凡多值依赖X->Y时，X必是R的超键，那么称R是第四范式的模式。

例如，职工表(职工编号，职工孩子姓名，职工选修课程)，在这个表中，同一个职工可能会有多个职工孩子姓名，同样，同一个职工也可能会有多个职工选修课程，即这里存在着多值事实，不符合第四范式。如果要符合第四范式，只需要将上表分为两个表，使它们只有一个多值事实，例如职工表一(职工编号，职工孩子姓名)，职工表二(职工编号，职工选修课程)，两个表都只有一个多值事实，所以符合第四范式。



### 总结

- 第一范式：不存在可以分割的属性（比如电话可分为工作电话和个人电话）
- 第二范式：非主属性要完全依赖于主属性，不能存在主属性其中的一个就能决定非主属性的情况
- 第三范式：消除传递依赖（**不**允许出现 学生学号+课程号->课程号->老师号）
- BCNF范式：主属性不依赖于主属性
- 第四范式：要求把同一表内的多对多关系删除。
- 第五范式：从最终结构重新建立原始结构。



### 参考

- [CSDN博客](https://blog.csdn.net/dove_knowledge/article/details/71434960 )

- [比较形象一点例子](https://www.cnblogs.com/lca1826/p/6601395.html)